#!/usr/bin/env node

/**
 * Creates minimal placeholder PNG icons for development
 * Production icons should be generated from logo-source.svg
 */

const fs = require('fs')
const path = require('path')

// Minimal 1x1 blue PNG (base64 encoded)
// This is a tiny PNG that can be scaled to any size
const BLUE_PNG_BASE64 = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M/wHwAEBgIApD5fRAAAAABJRU5ErkJggg=='

// Red variant for special icons
const RED_PNG_BASE64 = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8z8DwHwAFBQIAX8jx0gAAAABJRU5ErkJggg=='

const OUTPUT_DIR = path.join(__dirname, '..', 'public', 'icons')

// Icon configurations
const ICONS = [
  // Standard icons (blue)
  { name: 'icon-16.png', color: 'blue' },
  { name: 'icon-32.png', color: 'blue' },
  { name: 'icon-48.png', color: 'blue' },
  { name: 'icon-72.png', color: 'blue' },
  { name: 'icon-96.png', color: 'blue' },
  { name: 'icon-144.png', color: 'blue' },
  { name: 'icon-192.png', color: 'blue' },
  { name: 'icon-512.png', color: 'blue' },

  // Apple touch icons (blue)
  { name: 'apple-touch-icon.png', color: 'blue' },
  { name: 'apple-touch-icon-152x152.png', color: 'blue' },
  { name: 'apple-touch-icon-120x120.png', color: 'blue' },
  { name: 'apple-touch-icon-76x76.png', color: 'blue' },

  // Splash screens (blue)
  { name: 'apple-splash-2048-2732.png', color: 'blue' },
  { name: 'apple-splash-1668-2388.png', color: 'blue' },
  { name: 'apple-splash-1536-2048.png', color: 'blue' },
  { name: 'apple-splash-1242-2688.png', color: 'blue' },
  { name: 'apple-splash-1125-2436.png', color: 'blue' },
]

function createPlaceholderIcon(filename, colorBase64) {
  const buffer = Buffer.from(colorBase64, 'base64')
  const filepath = path.join(OUTPUT_DIR, filename)
  fs.writeFileSync(filepath, buffer)
  return filepath
}

// Ensure output directory exists
if (!fs.existsSync(OUTPUT_DIR)) {
  fs.mkdirSync(OUTPUT_DIR, { recursive: true })
}

console.log('üé® Creating placeholder icons...\n')

let created = 0
for (const icon of ICONS) {
  const base64 = icon.color === 'blue' ? BLUE_PNG_BASE64 : RED_PNG_BASE64
  const filepath = createPlaceholderIcon(icon.name, base64)
  console.log(`‚úÖ Created: ${icon.name}`)
  created++
}

console.log(`\n‚ú® Successfully created ${created} placeholder icons!`)
console.log(`üìÅ Location: ${OUTPUT_DIR}`)
console.log('\n‚ö†Ô∏è  IMPORTANT: These are 1x1px placeholder images')
console.log('   For production, replace with real icons:')
console.log('   1. Open public/icons/generate-icons.html in browser')
console.log('   2. Download all generated icons')
console.log('   3. Or use: https://realfavicongenerator.net/')
console.log('   4. Upload logo-source.svg to generate all sizes')

// Create README in icons folder
const README = `# PWA Icons

## ‚ö†Ô∏è Current Status: PLACEHOLDER ICONS

The current icons are 1x1px blue placeholder PNGs for development.

## üé® Generate Real Icons

### Method 1: Browser Tool (Easiest)
1. Open \`generate-icons.html\` in your browser
2. Click "Download" for each icon
3. Save all files in this directory

### Method 2: Online Generator
1. Go to: https://realfavicongenerator.net/
2. Upload \`logo-source.svg\`
3. Download and extract icons to this directory

### Method 3: PWA Builder
1. Go to: https://www.pwabuilder.com/imageGenerator
2. Upload \`logo-source.svg\`
3. Download and extract icons to this directory

### Method 4: ImageMagick (Command Line)
\`\`\`bash
# Convert SVG to all required sizes
convert logo-source.svg -resize 192x192 icon-192.png
convert logo-source.svg -resize 512x512 icon-512.png
# ... (see generate-pwa-icons.md for all sizes)
\`\`\`

## üìã Required Files

- ‚úÖ icon-16.png
- ‚úÖ icon-32.png
- ‚úÖ icon-48.png
- ‚úÖ icon-72.png
- ‚úÖ icon-96.png
- ‚úÖ icon-144.png
- ‚úÖ icon-192.png
- ‚úÖ icon-512.png
- ‚úÖ apple-touch-icon.png (180x180)
- ‚úÖ apple-touch-icon-152x152.png
- ‚úÖ apple-touch-icon-120x120.png
- ‚úÖ apple-touch-icon-76x76.png
- ‚úÖ apple-splash-*.png (for iOS splash screens)

## üöÄ Production Checklist

Before deploying to production:

- [ ] Generate real icons from logo-source.svg
- [ ] Replace all placeholder PNGs
- [ ] Create favicon.ico from icon-32.png
- [ ] Test PWA installation on mobile
- [ ] Verify icons appear correctly in install prompts
- [ ] Check icons on home screen after installation

---

**Last Updated**: ${new Date().toISOString().split('T')[0]}
**Generated by**: scripts/create-placeholder-icons.js
`

fs.writeFileSync(path.join(OUTPUT_DIR, 'README.md'), README)
console.log('\nüìù Created README.md with instructions')
